{"componentChunkName":"component---src-templates-blog-js","path":"/blog/rest-api-with-node-typescript","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Rest API with node and Typescript","date":"2020-05-07"},"html":"<p>สวัสดีครับ วันนี้ขอนำเสนอบทความเกี่ยวกับการใช้ Node.js และ Typescript เพื่อสร้าง Rest API นะครับ เนื่องจากว่าได้รับมอบหมายให้ใช้ Typescript ทำโปรเจ็คขึ้นมาตัวนึง เลยคิดว่าเขียน blog ไว้ด้วยเลยดีกว่า ภาพรวมก็จะคล้าย ๆ กับ <a href=\"https://xeusteerapat.github.io/blog/node-sequelize-rest-api\">บทความก่อนหน้า</a> แต่ว่าคราวนี้ผมเปลี่ยนไปใช้ ORM อีกตัวนึงนั่นก็คือ <a href=\"https://typeorm.io/#/\">TypeORM</a> สาเหตุที่ไม่ได้ใช้ Sequelize เหมือนครั้งก่อนเพราะว่าตัวอย่างใน Doc ของ Sequlize ที่ใช้ Typescript มีน้อยมากกก (อ่านดูแล้วไม่ได้ช่วยอะไรใดๆ เลย 555555) แล้วทีนี้ลองมาศึก TypeORM ดู พบว่าเค้าเขียนเพื่อรองรับกับ Typescript โดยเฉพาะเลย อีกทั้งการทำ CRUD ก็คล้ายๆ กับวิธีการของ Sequelize ดังนั้นก็เลยเปลี่ยนมาใช้ TypeORM ครับ</p>\n<p><a href=\"https://github.com/xeusteerapat/node-typeorm-crud\">Github Repo</a></p>\n<h2>What is Typescript?</h2>\n<p>Typescript เป็น super set ของ Javascript นั่นหมายความว่าทุกอย่างที่ Javascript เขียนได้ ก็สามารถเขียนใน Typescript ได้เช่นกัน แล้วมันต่างจาก Javascript ยังไง? เรารู้กันอยู่แล้วว่า Javascript เป็น Dynamic Typed คือไม่ต้องประกาศว่าเป็น number, string, boolean บลาๆๆๆ แต่ Typescript นั้นเป็น Static Typed ทำให้เราสามารถเขียน Javascript ได้โดยมี type กำกับ และสุดท้าย Typescript ก็จะถูก compile ให้กลายเป็น Javascript ธรรมดาเพื่อให้ใช้งานได้ใน browser ทั่วไปครับ</p>\n<p>บทความนี้ผมเขียนโดยใช้ Typescript ก็จริงแต่ว่าจะไม่ได้เน้นการใช้ Features ที่ advance มากนัก เพราะผมเองก็เพิ่งหัดเขียน Typescript ได้ไม่นานเท่าไหร่ สำหรับคนที่มีพื้นฐาน Javascript อยู่แล้วก็สามารถทำตามได้อย่างไม่ยากครับ</p>\n<p>เริ่มกันเลยครับ</p>\n<h2>Project Setup</h2>\n<p>ใครที่ยังไม่ลง Typescript ก็สามรถติดตั้งได้ผ่าน <code>npm</code> ครับ</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm install -g typescript ts-node</span></span></span></code></pre>\n<p>ทีนี้ลองเช็คดูว่าติดตั้งเรียบร้อยดีมั้ยโดยพิมพ์</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">tsc -h</span></span></span></code></pre>\n<p>ขึ้นแบบรูปข้างล่างก็โอเคครับ</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.1063829787234%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACBUlEQVQoz41SZ3PaUBBUZjJWQoJpwYBAoEKThEWVACGKKKHbQ1yS/JP8+83cgTxO4g/5cPNOD3Zvd98J01/PqLtrVJ0l1M4MSstH0fZRavrIN0YoNDxI1hCSOUDWDJDseoibHuL6ArFKgKgyQrTkIaqcS6j3TsjfrpHQp8gaK0jWGqlKgGQ5wLUyhij18T7r4Crn4irnQMy6EHMuRKkHUXLwIe/+UYLW3SFrLJAx5ii1tqg4d8g3VkjoY8TUEdK1gPuPhf5/lRDXfbxLt/GlOmOyhv8IvXuAbG8gWSseRpZoOgH+VhTWC6HS2iJVmTLoc3GImOrjWh0hrvlI6JN/yELg6/71nVBxjlDbO1ZHl2EudIZ9CKDvZHmCcu/IDghX698jro0534jchyDbX6F19pxbRB68mUtISiCKpjl5RtW9gzE4wRieoPeOqLr3uKkFEIhIttfIWUu2KL6RC1XkQpwqT2GPn5jA8h448/rghNb0OwsTQrtkgf5EPU0iJfQgdObMJQq3ax58U5+zZbW9P9vu7KF1D2yfCcu9A180Ro8oNjdnteaSgfQ4rE4evMRBeRHJecCGV416OmkrBLJKck3vG9vuzn9Cae3YSqY+5w0oNbdMRD25oIcgEhJCRFT6pRfoRyIkcHv2g4MmpaSCrJMqWp1PxbNKIqYoyEH6Ek3oKGMs8BvHbmWC7RSr0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tsc\"\n        title=\"tsc\"\n        src=\"/static/426d237ce56a3d85c4a8489aa63e0166/1d69c/tsc.png\"\n        srcset=\"/static/426d237ce56a3d85c4a8489aa63e0166/4dcb9/tsc.png 188w,\n/static/426d237ce56a3d85c4a8489aa63e0166/5ff7e/tsc.png 375w,\n/static/426d237ce56a3d85c4a8489aa63e0166/1d69c/tsc.png 750w,\n/static/426d237ce56a3d85c4a8489aa63e0166/78797/tsc.png 1125w,\n/static/426d237ce56a3d85c4a8489aa63e0166/a83dd/tsc.png 1482w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>คราวนี้ก็สร้างโฟลเดอร์ขึ้นมา</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mkdir node-typescript-rest-api </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">cd</span><span class=\"mtk1\"> node-typescript-rest-api</span></span></span></code></pre>\n<p>Initialize package โดยใช้คำสั่ง</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm init -y</span></span></span></code></pre>\n<p>จากนั้นก็ install dependencies ดังต่อไปนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm install express body-parser mysql2 reflect-metadata typeorm --save</span></span></span></code></pre>\n<p>ทีนี้ install devDependencies คือ typescript และ nodemon</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm install -D typescript nodemon</span></span></span></code></pre>\n<p>เนื่องจากว่าเราจะใช้ Typescript ในการเขียนใช่มั้ยครับ โดย Typescript จะช่วยในการตรวจสอบ type ของตัวแปรต่างๆภายใน code ที่เราเขียน รวมไปถึง type ของ Library ที่เราจะนำมาใช้ด้วย แต่ว่า Libray ส่วนมากถูกเขียนขึ้นมาจาก Javascript เป็นหลัก ดังนั้นเราจำเป็นต้องติดตั้ง package เสริมคือ <a href=\"http://definitelytyped.org/\"><strong>Definitely Typed</strong></a> เพื่อให้ Typescript ทำงานกับ Library ที่เราใช้งานได้อย่างเต็มความสามารถ โดยติดตั้ง package ดังต่อไปนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm install -D @types/express @types/body-parser</span></span></span></code></pre>\n<p>คราวนี้ต้องมาตั้งค่า configuration file ของ Typescript กันก่อนโดยสร้างไฟล์ <code>tsconfig.json</code> ขึ้นมาเพื่อเป็นการบอก typescript compiler ว่าจะต้องจัดการกับไฟล์ <code>.ts</code> ในโปรเจ็คอย่างไรบ้าง ที่จริงมันมีรายละเอียดการตั้งค่าเยอะมาก แต่ในที่นี้ผมตั้งค่าตาม Document ของ TypeORM เป็นหลักนะครับ</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"json\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// tsconfig.json</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;compilerOptions&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;lib&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk11\">&quot;es5&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&quot;es6&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&quot;dom&quot;</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;target&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;es5&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;module&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;commonjs&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;moduleResolution&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;node&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;emitDecoratorMetadata&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk5\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;experimentalDecorators&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk5\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>จากนั้นก็สร้างไฟล์ <code>ormconfig.json</code> ขึ้นมาเพื่อควบคุมการทำงานของ TypeORM</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"json\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// ormconfig.json</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;mysql&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;host&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;localhost&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;port&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">3306</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;username&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;YOUR_USERNAME&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;password&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;YOUR_PASSWORD&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;database&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;YOUR_DATABASE_NAME&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;entities&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk11\">&quot;src/entity/*.ts&quot;</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;logging&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk5\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&quot;synchronize&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk5\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>จากนั้นก็ไปสร้าง database ไว้ที่ mysql ครับ โดยใช้คำสั่งพิมพ์ลงไปที่ terminal (หรือใครจะสร้างด้วยวิธีอื่นก็ได้นะ)</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mysql</span><span class=\"mtk8\">&gt;</span><span class=\"mtk1\"> create database rest_api_typescript</span><span class=\"mtk8\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mysql</span><span class=\"mtk8\">&gt;</span><span class=\"mtk1\"> use rest_api_typescript</span><span class=\"mtk8\">;</span></span></span></code></pre>\n<p>เกือบลืม สร้าง Folder structure แบบนี้นะครับ</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 364px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 154.7872340425532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEI0lEQVRIx5WW12/qdhTH89KhW1Xqzd5hb7MMNh5gG9vsMMIMmXe2UaVKldr3qlKrPvW5/+23OoeENPcCSR8O4J/Nh3O+Z7HmSVkI56voTO/QvbxDsXEOu3ODcvsaamXE52Tt8x/QmnzE6M1PEM0eNv0ydsPqZ7Z2ECvCk7SgVIYQS0P4UxXky2eIKw34sw6yRhfpUgf5ch+i1WPzZWxsBwuLgXRjL6JiL1SC897A9JcpfCkXsjuAUhkxlGA56wyyM+DP+1EdOyGFAQ/vcyAd7Ec1HMVNKG0bk+/fwZ9x2TOtNkFKP4VkDyA7Q6jVMZ8dJUrY/gT0BEhhnyRM+KsWfE4R0XwNufIZNv0Sh7bhy7Ote3N47cnNYTsLoPdAHcdxE/GuDWHcg0eoIFU8xYZfwoZvZuu+PLZYHm0pjIH0Ql4cJQwcR0r48SoJt1mGJ11FwR1Asvscpl6bcKJWweZAeuBYMHEQ1/HznYaLaRNRqQnJ6SN5ryFBE2qTPVwJfLhJuuwEJHwTdLF2/Q92tRHypVOI1hmDBLUFqtmtgLw65P8CtwMSNiNFvGr+ihOtD9nqodiYQq2MkTW7COUqc+DKkEnDY8HgAjc6N0gqNQhKg8PMWT2GPGT8RRrSgyeCiZOkCXf0AZLVQVprcriUFNKNMv0i4Kchr0cNfHHxNw6LY0hmBwm1hYTS5Az70uWlLbc0KZvhMr7u/oYDtY9s8RTu2Rto1QnrGCs0lg6FhRqSJUcOEqaFUMZFQmtx2ZC2VNj/T8OkieOEgfTEhVirIKt3oNUnKDWniMl1brmdFS33ecjBmYYbYQtfDf/CrtxDWm0gVWxzDSa11ss0fPKLQRm7sRJejf+Ex5xCdwew2tc8xijbEan2kjp8DGMvpODb4e/YKl1BEMsQ9DZihToX9H5EmyfkmZBV7NBFSMHroIovh39gw7iFqDdhtC65uKmXfWn72XDnHu6FFayHVFhJEU4kisN4iSc0aReVaxC0FgJZB9svGl+hGfC7oAZbEGHH0wipbdQHb+F0b6HXz3l0EZAy/VzHsIcU9n5YQSh3b6LNE4b0Iw8zpQ4brYOM0Z1le9lOeQDSRa5QgCjLENQGCu6IlxLtEVpM1f7b+aD1pstL63Lt4QPVoVfSEVB1eJM2IlKVvQvnK7z5vKnyfLXSGelLy2qBh4/AsKYhZujIWwM43Rueha3xR5TbV5wks3XJNWl3rmG1rxYW+hNgQNYQUjX40g57Ry1HAyEq1xEUXT6jMbd+vwUXJecRGFAQ1HREDB2i2WcvivVz1Abv4PZuWT+jecFSrNp+T5ISThcQThVYI/q/Q1+m/zHUcmSU9cN48blpMwNSLRb0AiRNQt7qcZeQh6Qfeci6nV7Bn1ndMWsz72bQ7SANWpUXPOnE5p1pxWfe52fiv/Ea07Fm7uzNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"folder structure\"\n        title=\"folder structure\"\n        src=\"/static/dc538accc31a54ff49c5fa7545f1761d/e45a9/folder_structure.png\"\n        srcset=\"/static/dc538accc31a54ff49c5fa7545f1761d/4dcb9/folder_structure.png 188w,\n/static/dc538accc31a54ff49c5fa7545f1761d/e45a9/folder_structure.png 364w\"\n        sizes=\"(max-width: 364px) 100vw, 364px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>เท่านี้ก็ติดตั้งทุกอย่างเสร็จหมดละครับบบ มาเริ่มเขียน code กันเลย</p>\n<h2>Create Express Server</h2>\n<p>สร้าง Server เพื่อเริ่มต้นการทำงาน application ได้ดังนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// index.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk5\">*</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Application</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk5\">*</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">bodyParser</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;body-parser&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createConnection</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;typeorm&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRouter</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;./routes/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">createConnection</span><span class=\"mtk1\">().</span><span class=\"mtk7\">then</span><span class=\"mtk1\">(connection </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">app</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Application</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">app</span><span class=\"mtk1\">.</span><span class=\"mtk7\">use</span><span class=\"mtk1\">(</span><span class=\"mtk7\">bodyParser</span><span class=\"mtk1\">.</span><span class=\"mtk7\">json</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">app</span><span class=\"mtk1\">.</span><span class=\"mtk7\">use</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/players&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">playerRouter</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">app</span><span class=\"mtk1\">.</span><span class=\"mtk7\">listen</span><span class=\"mtk1\">(</span><span class=\"mtk6\">8080</span><span class=\"mtk1\">, () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`🔥🔥🔥 Server is listening on port 8080 🔥🔥🔥`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span></code></pre>\n<p>และสร้าง route สำหรับ player แบบนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk5\">*</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Router</span><span class=\"mtk1\">, </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, </span><span class=\"mtk7\">Response</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Router</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk1\">, (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    &lt;h1&gt;Get all players&lt;/h1&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  `</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>ลอง run app ดูครับ ด้วยคำสั่ง</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"bash\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">npm start</span></span></span></code></pre>\n<p>ถ้าได้แบบในรูปก็ถือว่าสำเร็จครับ</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.4468085106383%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHElEQVQY05WQTW+CQBRFWdVq20SlfCho7IDCBLS2FNAURbC17tz4///KaUDsoummi5PJu3fefTNP0eN3Bn7OMNihexs0L0ObZfSnBaq/p+9u6YpNfVb0nIpNTVdktddzt9yN19xaCYotP5ksj1jhAWt+ZBh+MVoc0f2Cnsjou3nd/BN4xbkMunr318BFuEbKFWKWYjsxpkgwRYo6SXkYJbSGcc1NQ+sPKr0Ka9spikwzvCjDj3IW8Z7pa8ZgnqIHKzrjtL70HxR7+YF8O+NFZ8TzCWt+wAhKzKBEneaYskR39qhujiEvWrU7zdvVVLUqqv0XGH6B8hJtkfEJOzxgyILHaY7mlTyFO8IwoWMnzXcS2tYv7ITOqHldo30DoC6tniQe2IQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"start app\"\n        title=\"start app\"\n        src=\"/static/80b1d17ad078fa62eaf7530e7e189649/1d69c/start_app.png\"\n        srcset=\"/static/80b1d17ad078fa62eaf7530e7e189649/4dcb9/start_app.png 188w,\n/static/80b1d17ad078fa62eaf7530e7e189649/5ff7e/start_app.png 375w,\n/static/80b1d17ad078fa62eaf7530e7e189649/1d69c/start_app.png 750w,\n/static/80b1d17ad078fa62eaf7530e7e189649/78797/start_app.png 1125w,\n/static/80b1d17ad078fa62eaf7530e7e189649/aa440/start_app.png 1500w,\n/static/80b1d17ad078fa62eaf7530e7e189649/966ce/start_app.png 2050w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>Create Model Entity</h2>\n<p>ขั้นตอนต่อไปก็มาทำการสร้าง Player entity เก็บข้อมูลนักฟุตบอล ซึ่งก็คือ table ใน database ของเรานั่นเอง ในที่นี้ผมจะเก็บข้อมูลดังนี้</p>\n<ul>\n<li><code>id</code> เป็น number</li>\n<li><code>name</code> เป็น string</li>\n<li><code>age</code> เป็น number</li>\n<li><code>position</code> เป็น string</li>\n</ul>\n<p>เมื่อนำมาเขียนตาม Document ของ TypeORM ก็จะได้แบบนี้ครับ</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// entity/Player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Entity</span><span class=\"mtk1\">, </span><span class=\"mtk7\">Column</span><span class=\"mtk1\">, </span><span class=\"mtk7\">PrimaryGeneratedColumn</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;typeorm&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk7\">Entity</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Player</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk7\">PrimaryGeneratedColumn</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  id</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">number</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk7\">Column</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  name</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk7\">Column</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  age</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">number</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk7\">Column</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  position</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Entity เปรียบเสมือนตารางเก็บข้อมูล โดยตามที่ผมเขียนไว้ข้างบนก็ตรงไปตรงมาครับว่า ข้อมูลของแต่ละ <code>Column</code> คือ id, name, age และ position ของนักฟุตบอล โดยที่มี <code>id</code> เป็น <code>PrimaryGeneratedColumn</code> นั่นเอง</p>\n<h2>Create Player</h2>\n<p>ต่อไปเราก็สร้างข้อมูลโดยเขียนคำสั่งใน controllers แบบนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// controllers/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;typeorm&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, </span><span class=\"mtk7\">Response</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Player</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../entity/Player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Player</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> { </span><span class=\"mtk8\">...</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">body</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">save</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>จากนั้นกลับไปแก้ player route ก่อนนะครับ</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk5\">*</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../controllers/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Router</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">post</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<p>จากนั้นก็ใช้ Postman ทำการ <code>POST request</code> ไปที่ <code>http://localhost:8080</code> เพื่อเพิ่มข้อมูลของนักฟุตบอลลงไป แล้วลองยิงดู</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.72340425531915%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACW0lEQVQ4y4WS63KbMBCFeY7a2BgESOiCjBEIDI6bOrY70/d/ndNZYadtZtL8+GZXmr0caTc6nU54fX3FOI6Ypin4l8slcL1e8fb2Boo5jiOOx2OIe/I8/22j8/kckulAiVSACt1uN9x/3nG/3zG/nDEcj6HhR+Z5/uccOefQti32+z2GYUDXdTC1Cda6BkoJ/HqZ8H1q0TxiCMqjnGfuOE2w1iKiQ0i2ewx+gPcD6toGn57hfY8fpxlD12J0BxwOB3jvQ07TNEHVoWngawmjFSK6pC5SSmijYGsNQ9YaGGOglIZUBqKSMEotcVpDPfy6rqGkhBIclRCI+r4DLyv4c4n5qjCNPebJYhxqWCshJQ/PriqOoixRfqAoisXnHJzzRaGsFHTD0PgC0nBoLeCchGslOicx9KRcgDH2JRFJJumMFWBZgTzPA4wtZBnBgk9qviLSpgbnIsgmyWQFF+8+WSHEQvCXpz0JMSUPkB9dzi/wfYfe+7AKwzhCN8va0JRpqjSEAA3JmDCIgLXoaUO6BrXbw7UtotuxxzwOaJ0LRXrfw3UuFH8WJD+sSnsIq1NVMnzTc+JSK0gtoZVCZPcNpnleFtTasFtd18OYOiwwKaFGfhjQNnuMTQ2W//nP558XDxsl2y3SNEWWZcgrDVYK8CxByVLkaYJ1HOPbahVYrddYrWNsNptPiXa7HYg4jmH6CebgIKVAkaUQBQNLd+/skgSbOA6xnxGROtqfJElghxNq58FoaiyFLBhkmUPzHKrMUbAsJH2pkP5CVOJx+ei22WAdP4kDdLfdbv/Lbz+q6G5HAZ4/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"create player\"\n        title=\"create player\"\n        src=\"/static/ba4abe5632ce3f3e9081db2307629b04/1d69c/create.png\"\n        srcset=\"/static/ba4abe5632ce3f3e9081db2307629b04/4dcb9/create.png 188w,\n/static/ba4abe5632ce3f3e9081db2307629b04/5ff7e/create.png 375w,\n/static/ba4abe5632ce3f3e9081db2307629b04/1d69c/create.png 750w,\n/static/ba4abe5632ce3f3e9081db2307629b04/78797/create.png 1125w,\n/static/ba4abe5632ce3f3e9081db2307629b04/7960f/create.png 1274w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ลองเพิ่มอีกสัก 2-3 คนนะครับ แล้วไปเช็คที่ database ดู</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.638297872340424%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABVklEQVQozz1R2VLCQBDkwdsIVIkc4QpRrnAaCBICCiSAEbzwqFJe/P+faKsnwMPU7s5O9/RMh266z0jX50jVPKTrM8SK4+BteMg0Fsg05si3feRaj5JnLt/yEdWHUPIDXDC0AcKag5N0DyEWEnzdWSFZdXGW7cvnLlgc0YfQzaUQFsyl1PJOskjBEfLL4kNASJKk4aHUe4V2+yTBoh2xIqAh1Jq3b1y0XsDJiNE7K7nHSmMcqxZCicoUieoUNecDVfsdxmAddNccHKa6OFItnGbuhJDjV/pvsLwNGsNPhAsOznO21FLlXqFam6E5+oI5+YHlbtB1fwXQuv+GYa/ln02onk0d/0/2fZAwRRWJovooIKTCeHkiICrINhcC5qm1fVkHd3hVnkgkDVcMilemgSk0hHu83hISxL3Q5Swd3DpKJ8PbXRKk5G0hUHK25GRUvrdO85+E/7QV05kfTaQOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mysql\"\n        title=\"mysql\"\n        src=\"/static/788541a9177fab39bf01876560387425/1d69c/mysql.png\"\n        srcset=\"/static/788541a9177fab39bf01876560387425/4dcb9/mysql.png 188w,\n/static/788541a9177fab39bf01876560387425/5ff7e/mysql.png 375w,\n/static/788541a9177fab39bf01876560387425/1d69c/mysql.png 750w,\n/static/788541a9177fab39bf01876560387425/78797/mysql.png 1125w,\n/static/788541a9177fab39bf01876560387425/cd138/mysql.png 1220w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>เรียบร้อยยยย สังเกตว่า <code>id</code> ถูกเพิ่มให้อัตโนมัติเลยครับ</p>\n<h2>Get players</h2>\n<p>อยากเรียกดู players ทั้งหมดที่สร้างไว้ ก็ทำแบบนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// controllers/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">players</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">players</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>แล้วไปเพิ่ม ที่ <code>routes/player.ts</code> แบบนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">, </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../controllers/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>จากนั้นก็ลอง Test ที่ Postman เหมือนเดิมด้วย GET method</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 154.7872340425532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAABYlAAAWJQFJUiTwAAADuklEQVRIx41V23ajRhDUZ1gCxHVmuCNAXARYkpNYTmI/5NibZP//R2pPN0Iry7K8D6WZQdB0dVU3szyL8Puuwj+PDyMOv+HbX494+/MPPA0tDusE60yiLRXyvERRFCjLElW1RlmukSUxqsRHnKZYZRlmeVmg6Ttsuh6bnjBg2G4xbHdoux7dpsXQt+i7Bm27QdM0jLZt0bQt6rpCW69R1TXqusbsfrvF6+srdtstHvZ7xsvLC18jvL294f/v3/Ht3//w/Pw3drsd9vv9GR4YD8fzrC1zNGXBVC5B1GjN85z305nXCRfPzLI0xcvzM/q+xzAMvBKdx8dHpkbnw+GA9XqNruvw9PSEfrjHvq1w6Cp4UsL3FZQaMaOfOI6RpinCMITv+wiCgPe0Tnu6TmuSJAijCFEQIA4DuK4Hz/uJmWVZME0Ttm3zSmdN00bo+ojjXj/u9Wmv6zAM4x1mFMhxHA60XC45sJ8WiLIVpBSwLZPh2hYs0+R7boEDTuCLhoGk7rDqdoh8gTLy4XsuQunxSxfamBmtlBE9M62ngJThFNAwdGTtPVabLdJ1BSkVQuEiVgKR9JD4gveJL+HY1rtg7wLS2y3bhhAebCq0CuBKn/+jDAPhQXku75XnIBAul+BmQNuyIKXE0iShxmwXmoa5puFucSbSmSBXKQshTpQpUFTUWDUdQl8yTcqKaNILLzO6qjJlxQFNk62TNj3XMVvFSEIf0nWYsjMJ95XKZNiJtuPYSKoNVs2AtGoglY9VqFBEAco4ZDOPTMyr4IDULVxD8qBSbN6RzvhWKj558Zd9ONVw6hhXBRBKwbatY4cYP3FRs6s1VPzwVB+DKRf9DnEgUYTq6D+JlERS4oOyHzI8iUI36jp3Sd7tkJUFApokrsOdQv4zj7RvBpwypJtJHBklCNIcKs7gCcHB0kCyma/Z5mrASRTaL+Z30OZzaIs5C0R9O19op/7Vz3DuxauUKctgtUZSVvCVhGdb8BwbwnV44jjHM+HTXn4nimEgrXvk3RZxpNiDRJWGAgmSqHEC5aFCGigYx2c+FYX+zJoBWTsgq2tINU6bSArOcLLOl5SnGpInTRoYQsJ2x/4Vjs39PBnb/BVRaKWgY0CHTb1cjtOGxLg7ijLh5rS5rGFctsg39zxtqGZsG1/yxMkCyaBrn2ZIXzTy30mUYw2TNEbkSzY2TZtpuBJI9S8pT7aheUjtFxUVhFSIpcdqh8I7DVcS5yZl+qaO48uBrmsfmv6zdrua4RTo/IZbLfZZH1PAH9rOfXYi35ViAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Get player\"\n        title=\"Get player\"\n        src=\"/static/ae17ae5dfa8287fbda810fd1988e7415/1d69c/read.png\"\n        srcset=\"/static/ae17ae5dfa8287fbda810fd1988e7415/4dcb9/read.png 188w,\n/static/ae17ae5dfa8287fbda810fd1988e7415/5ff7e/read.png 375w,\n/static/ae17ae5dfa8287fbda810fd1988e7415/1d69c/read.png 750w,\n/static/ae17ae5dfa8287fbda810fd1988e7415/709cb/read.png 1034w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>Update player</h2>\n<p>ถ้าอยากแก้่ไขข้อมูลของนักเตะตาม <code>id</code> ก็ทำได้โดยดึงข้อมูลตาม <code>id</code> ที่ต้องการแก้ไขออกมาก่อน จากนั้นค่อยทำการ update อีกที</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// controllers/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">name</span><span class=\"mtk1\">, </span><span class=\"mtk7\">position</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">body</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">update</span><span class=\"mtk1\">(</span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">), {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">name</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">position</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">updatedPlayer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    id: </span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">updatedPlayer</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>แล้วก็แก้ไขที่ <code>routes/player.ts</code></p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">updatePlayerById</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../controllers/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">put</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/:id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>ทดสอบที่ Postman และลองเช็คที่ database ดู</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 114.36170212765957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADWklEQVQ4y42U+XLiRhCH9RzGWPd9zKUTCTACAza7SSWV93+VX6qbhbUTu3b/+Kp7ptTndMsyQmA/TvhzXuOPeYO/jjP+nkdMukAsC2itoZSCMQa1MWiqHI2K0JoCSmloraCNQa9KiLKAVXc9puc9dvOM7W7GME6o6xpaClRKsMMbhpAVjCpgtLg6VApKa9RKQAoBaz1NOOz3eDkccD6d0DQN8jxHVVWoygplWd6hOyElhLgh3iEhpYS1Wq2wPxwwDANI32w2OJ/Pdy6XC94ub6wfDgdM04T1ev0l1jiO9w9v0Pl0OuF4PLJ8e33F+fUV680WwzBinCYOfoN83LDatmUn1CPKkqLQR5R+3/dYjSvkpkItBS7HPVZTDaMNf0fVkC21iSB7i/pCB3JATruuQ9e1EKICBRuGHqapsekafH8eMfcavbm+LD0SBSVbmgKytYqiYM90KSqJru04QJblqOsGfT+w1KaBaXqUQmIw11ESVcW2lBQ55AxJIdI0gaxj5GUMLQt0bQklM0brHF1boK1z5HmKIIwQxzEThiHLKIpYt9q24QhJGuP4T4JpllhPI1aDwPNGY7uhGSygVcEyzzMkSfIlFs0QlRvHEQrpo5ABkiJAnsfo2hxapQjDAK7rwfN8+L6PwL/Kz+BHqaqS0w78iAmDCEEQwvevUDkUkOSv4AxpM65GMRsSSZy8O8e/jdX2A0zd8MPQy/HO1galrPjMe6019/nDGr7TCUqMvre+z2ts+4bniYxplobVgFyVfKZRoDsyoBG77XTJrar4niQ54zlcGYlvpxceYloduqRN2W63PI+3HSWD/X6P3W6HvutwWfcoixxxkiBNU35hLjlOUyh9nUWKlGXZvQTSb38TMuDhp55nGVSRIwpDBEHwActxbCyXSx5K13WxXD5hsXjEYrHA4vERDw8PzAd9scDD4pHt/ovlOA7Pj23bIJ0oTIe0KBD4HnzX+YELz3HuZ8e2OfjT00fYoed5nB1f2jbM9gWlaaDyGFUSIQ19lEmILAog0hgyixF4Hmf0pUPKkC5sx4GeZohuRFk3iHwPKosh05izolKp/JuzT0smh0F4bSqX7XpwPJ+l6zgIPReB5/4M+vT/Un9m6DpcbiUreL736UfLH1A77F/wL5cOwCuTPBCCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"update player\"\n        title=\"update player\"\n        src=\"/static/6c1572c6e9682bf86c1ab817d4517eed/1d69c/update.png\"\n        srcset=\"/static/6c1572c6e9682bf86c1ab817d4517eed/4dcb9/update.png 188w,\n/static/6c1572c6e9682bf86c1ab817d4517eed/5ff7e/update.png 375w,\n/static/6c1572c6e9682bf86c1ab817d4517eed/1d69c/update.png 750w,\n/static/6c1572c6e9682bf86c1ab817d4517eed/84ee5/update.png 1076w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.914893617021278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIUlEQVQY032PW0/CUBCEm6hUIfHBKKX0xrVALRRaToFgIlKhpaVF4///LWN2kcuTD5M9yZn5Zlcavv2gNzug6acYzL9gejHaQQY7LGCLHM7iG12Rw10efST+Cwv0Zwf2GqMtNHeDF3sFyfIS6MMt9GGMxjjFgz5D2Ziz6E2qmAvUXzdo+hk0d4uWn8HydlAGEWQtREmdolQXkOsCEpGf7RVDTS/hJmMUM8AYJWhMUjx13tlDMPJ1RYHmJEW1v0bFvBSTJGuccNga79CZ5mgH+3OANqFJMFJtEDG0Pc2PwN4HX3KvhReg6kRQnU++nxqV/ppDNSfCY2OJG8XnAEn+O+tWCXBXC/h9gp2m1BF76E6MaiRQbgnIang2Xjf/p+sNfwHxU7KGLXib2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"update sql\"\n        title=\"update sql\"\n        src=\"/static/7d6495b45bf75785dba58124123a659f/1d69c/update_sql.png\"\n        srcset=\"/static/7d6495b45bf75785dba58124123a659f/4dcb9/update_sql.png 188w,\n/static/7d6495b45bf75785dba58124123a659f/5ff7e/update_sql.png 375w,\n/static/7d6495b45bf75785dba58124123a659f/1d69c/update_sql.png 750w,\n/static/7d6495b45bf75785dba58124123a659f/78797/update_sql.png 1125w,\n/static/7d6495b45bf75785dba58124123a659f/0940f/update_sql.png 1154w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ก็เป็นไปตามที่แก้ไขครับ</p>\n<h2>Delete player</h2>\n<p>สุดท้าย ถ้าอยาก delete ก็ทำคล้ายๆ update เลยครับ หาจาก <code>id</code> ก่อนจากนั้นก็ค่อยทำการลบออกไป</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// controllers/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">deletePlayerById</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    id: </span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">remove</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`Player id ${</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk11\">} has been deleted.`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>แล้วก็ที่ <code>routes/player.ts</code> จะได้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">deletePlayerById</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../controllers/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/:id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">deletePlayerById</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<p>เหมือนเดิมครับบบบ ใช้ Postman</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.06382978723406%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOElEQVQ4y22T6XajMAyFeZGmbTIFwuINmzUhQEKWTnj/x7lzpAYmJ6c/vmNZlmSha7wyiTCVGaZTh79Di6kxSIVGpBxsZmCMQSFjxCqGMApZlsEaDSdi5NpH6RJoY2G1RC4ieFVZ4dgPGMYR/fGEqiwgpILUGYzR0MYgUxJSSyitobWGIZSE0SkyI6G1gdYKRgl4zW6HruvQ9z0u5zOKskSaphAi5ZVIaJ8KCCEgpYRU6oGGlApK/fd5TdNgut+5YFVVaNsW1+sV39/fzP1+xzRNbJN/v98z7WN9xavqGtfbDV3fg4oTx+MR5/MZ4zgyt+uViw3DsMTUdb3w7PMOTY3beESeGZRlicPhwDfRrIqi4I5VYZBKwUnky/Oc4wg6pz356dwbywz3tkSX/yiqlGJ+5ii4cCJTJEnCflpn+zmWoPl6YRzDWAeb5+zwfR9BECAMQ179wEf42NMZi5QkS9wrXhD4yIyBc46DoijCdrv9FUrY7XY8K7J/i/E2X18It1suNN9ChcMgZMjmfRgycRwz8/4Z7vB2GtA2Nd9MotDToWELp2CdZYHojP6Q5R1KCfFgniP56Cu9W+NwaWtY61gtZy0r5goH81CeLqEkKkoxJF6mNaxWiKJ46Zrm6yVSYrxclkRKILs7dJy4dCwEd0vvsqob9JXDqXL48/Uj2iLKZr3G5+cn30CdzfIT1louOhcmdd/f37GmnAfrF7yPjw+sVisO3Gw2XJx8r4F0Rv63t7eF1ZM98w/3rtndmiQ6pAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete player\"\n        title=\"delete player\"\n        src=\"/static/d60050e395fc3a5506ef8dbc9332ce1b/1d69c/delete_method.png\"\n        srcset=\"/static/d60050e395fc3a5506ef8dbc9332ce1b/4dcb9/delete_method.png 188w,\n/static/d60050e395fc3a5506ef8dbc9332ce1b/5ff7e/delete_method.png 375w,\n/static/d60050e395fc3a5506ef8dbc9332ce1b/1d69c/delete_method.png 750w,\n/static/d60050e395fc3a5506ef8dbc9332ce1b/5819f/delete_method.png 1042w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ลองเช็คดูว่าหายมั้ย</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.42553191489361%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQoz5VRyVLCUBDMyQ2QoIISyEaEIFtCwpoFAsZAAJcqLZWT/v9PtDVDeddD17yXTPf09BNqzhaqlUJqx6h2VyiZC64EmdBbQbVTUJ9irfm73t/iurlERpkip3nIqR5Xugvl1j0q3YRJcm+NjDLhn+eaz8jrAbLqFJVOgvrwCVL7AYa7Q83dQTTCg6Dmo2CEEGshhGIj4mmavYFipUwsGDOcVsc4kycMclA0F+z4phVD72/YrdbfwBg8snvikTgLUlM3eIOz2MOef7CDi9sZSs0lrhoRjqUhLutzNEbPTPbWX/DTbxbMqh7ytYA3yes+BCJSs+5smWCOX9D2Xvluzd7hRJ+cMQmTG8rQXey5jwadVEZcaRMS5QxpknSXHB6it2KHmp2i3IrZKa1LQ+lMcYic18EV5UZnypCiEUpmxPsXnQCFesgEEiBHlAlN/3XyFwjVTgKpE0OcuDiWhzgqEwYMaqDH+Q9+AAs77iOt06RzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"delete sql\"\n        title=\"delete sql\"\n        src=\"/static/d7a120bee90727e24490c78b241ed101/1d69c/delete_sql.png\"\n        srcset=\"/static/d7a120bee90727e24490c78b241ed101/4dcb9/delete_sql.png 188w,\n/static/d7a120bee90727e24490c78b241ed101/5ff7e/delete_sql.png 375w,\n/static/d7a120bee90727e24490c78b241ed101/1d69c/delete_sql.png 750w,\n/static/d7a120bee90727e24490c78b241ed101/78797/delete_sql.png 1125w,\n/static/d7a120bee90727e24490c78b241ed101/51800/delete_sql.png 1196w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>เรียบร้อยยย โดนลบไปแล้ววววว</p>\n<p>Code ทั้งหมดของ routes และ controllers ก็จะได้เป็นแบบนี้</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// routes/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk5\">*</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">deletePlayerById</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">} </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../controllers/player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">express</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Router</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">post</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">put</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/:id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">router</span><span class=\"mtk1\">.</span><span class=\"mtk7\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;/:id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">deletePlayerById</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">router</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<pre class=\"grvsc-container solarized-light\" data-language=\"typescript\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// controllers/player.ts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;typeorm&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, </span><span class=\"mtk7\">Response</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;express&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Player</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;../entity/Player&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createPlayer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Player</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> { </span><span class=\"mtk8\">...</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">body</span><span class=\"mtk1\"> };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">save</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getAllPlayers</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">players</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">players</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">updatePlayerById</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">name</span><span class=\"mtk1\">, </span><span class=\"mtk7\">position</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">body</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">update</span><span class=\"mtk1\">(</span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">), {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">name</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">position</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">updatedPlayer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    id: </span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk7\">updatedPlayer</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">deletePlayerById</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> (req</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Request</span><span class=\"mtk1\">, res</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Response</span><span class=\"mtk1\">) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getRepository</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">player</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">find</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    id: </span><span class=\"mtk8\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">playerRepository</span><span class=\"mtk1\">.</span><span class=\"mtk7\">remove</span><span class=\"mtk1\">(</span><span class=\"mtk7\">player</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">res</span><span class=\"mtk1\">.</span><span class=\"mtk7\">send</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`Player id ${</span><span class=\"mtk7\">req</span><span class=\"mtk1\">.</span><span class=\"mtk7\">params</span><span class=\"mtk1\">.</span><span class=\"mtk7\">id</span><span class=\"mtk11\">} has been deleted.`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Blog นี้ก็ขอจบเพียงเท่านี้ก่อนนะครับ หวังว่าจะเป็นประโยชน์ต่อผู้ที่สนใจทุกท่าน อาจจะไม่สมบูรณ์เท่าไหร่ เพราะผมเองก็ยังใหม่กับ Typescript แต่ก็จะพยายามฝึกฝนให้เขียนดีกว่านี้ และอธิบายได้ดีกว่านี้นะครับ Blog ต่อไปอาจจะมาเพิ่มเติมเกี่ยว User authentication ดูครับผมมม</p>\n<p>Happy Coding :)</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>"}},"pageContext":{"slug":"rest-api-with-node-typescript"}},"staticQueryHashes":["3159585216","3364050859","4152315797","440568431"]}